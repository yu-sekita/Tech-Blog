{% extends 'blogs/blogs_base.html' %}
{% bootstrap_css %}
{% bootstrap_javascript jquery='full' %}
{% load article %}

{% block title %}Create Article{% endblock %}

{% block content %}

    <div class="container" style="margin-top: 100px; margin-bottom: 100px">
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            {{ form.non_field_errors }}

            <div class="form-group">
                {{ form.title.errors }}
                <label>{{ form.title.label }}</label>
                {{ form.title }}
            </div>
            <div class="form-group">
                {{ form.thumbnail.errors }}
                <label>{{ form.thumbnail.label }}</label>
                {{ form.thumbnail }}
            </div>
            <div class="form-group">
                {{ form.categories.errors }}
                <label>{{ form.categories.label }}</label>
                {{ form.categories }}
            </div>
            <div class="form-group">
                {{ form.title_for_seo.errors }}
                <label>SEO用title</label>
                {{ form.title_for_seo }}
            </div>
            <div class="form-group">
                {{ form.description.errors }}
                <label>description</label>
                {{ form.description }}
            </div>
            <div class="form-group">
                {{ form.keywords.errors }}
                <label>keywords（カンマ区切り)</label>
                {{ form.keywords }}
            </div>
            <div class="form-group">
                {{ form.text.errors }}
                <label>{{ form.text.label }}</label>
                {{ form.text }}
            </div>
            <div class="form-group form-check">
                {{ form.is_public }}
                <label class="form-check-label">{{ form.is_public.label }}</label>
            </div>

            <div class="form-group row mt-5 mb-5">
                <div class="col-md-12">
                    <button class="btn btn-success" type="submit">Create</button>
                </div>
            </div>
        </form>
        {{ form.media }}
    </div>

    <!-- highlight.js -->
    <link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/highlight.min.js"></script>
    <!-- プレビューにもシンタックスハイライトを適応 -->
    <script>

        const elements = document.getElementsByClassName('markdownx');
        for (element of elements) {
            element.addEventListener('markdownx.update', event => {
                for (const block of document.querySelectorAll('pre code')) {
                    hljs.highlightBlock(block);
                }
            });
        }

    </script>
{% endblock %}
